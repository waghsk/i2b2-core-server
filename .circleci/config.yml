version: 2
jobs:
  build:
    environment:
      #IMAGE_NAME: jonathancardoso/building-on-ci
    docker:
      - image: circleci/openjdk:latest
    steps:
      - checkout 
      #- setup_remote_docker
      - run:
    
          name: checkout quickstart
          command: cd ..; echo "PWD:$(pwd)";
                   echo "working_directory:${CIRCLE_WORKING_DIRECTORY}";
                   QSDIR="/home/circleci/i2b2-quickstart/";
                   ls -l;
                   git clone --depth 1 https://github.com/waghsk/i2b2-quickstart;
                   cd i2b2-quickstart;
                   ls -l;
      - run:
          name: copy src into local
          command: QSDIR="/home/circleci/i2b2-quickstart/";
                   cp -rv  "/home/circleci/project/" "${QSDIR}/local/unzipped_packages/";
                   ls -l;
                   #cp -rv  "${CIRCLE_WORKING_DIRECTORY}" "${QSDIR}/local/unzipped_packages/";
                   #
                   #ls -l "${QSDIR}/local/unzipped_packages/";
                   #sh scripts/install/create_wildfly_circleci.sh;
                   #mkdir -p i2b2-quickstart/local/unzipped_packages;
                   #cp -r edu* i2b2-quickstart/local/unzipped_packages/;
                   
                                       
                   
                   #ant clean dist deploy jboss_pre_deployment_setup;
          #echo 'Hello World' 
            #docker build -t $IMAGE_NAME:latest .
workflows:
  version: 2
  build-master:
    jobs:
      - build:
         filters:
            branches:
              only: circle-ci
